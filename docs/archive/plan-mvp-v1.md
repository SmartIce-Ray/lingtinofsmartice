# Lingtin MVP è¯¦ç»†è®¾è®¡æ–‡æ¡£

## ä¸€ã€ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰ç«¯ (Next.js + PWA)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /recorder      â”‚  /dashboard       â”‚  /chat                            â”‚
â”‚  åº—é•¿å½•éŸ³ç«¯      â”‚  æ•°æ®çœ‹æ¿          â”‚  AIæ™ºåº“å¯¹è¯                        â”‚
â”‚  (P1)           â”‚  (P2)             â”‚  (P3)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                        â”‚
         â–¼                  â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         åç«¯ API (NestJS)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AudioModule    â”‚  DashboardModule  â”‚  ChatModule                       â”‚
â”‚  /api/audio/*   â”‚  /api/dashboard/* â”‚  /api/chat/*                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                        â”‚
         â–¼                  â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                        â”‚
â”‚  AI Pipeline     â”‚        â”‚                        â”‚
â”‚  (å¼‚æ­¥å¤„ç†)       â”‚        â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚                        â”‚
â”‚  â”‚ è®¯é£ STT   â”‚  â”‚        â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚                        â”‚
â”‚        â–¼         â”‚        â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚                        â”‚
â”‚  â”‚ çº å+NER   â”‚  â”‚        â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚                        â”‚
â”‚        â–¼         â”‚        â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚                        â”‚
â”‚  â”‚ è‡ªåŠ¨æ‰“æ ‡   â”‚  â”‚        â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                        â”‚
         â”‚                  â”‚                        â”‚
         â–¼                  â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Supabase                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL     â”‚  Storage          â”‚  Auth                             â”‚
â”‚  (æ•°æ®è¡¨)        â”‚  (éŸ³é¢‘æ–‡ä»¶)        â”‚  (ç”¨æˆ·è®¤è¯)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€é¡µé¢è®¾è®¡

### P1: åº—é•¿å½•éŸ³ç«¯ (/recorder)

**è®¾è®¡ç›®æ ‡**: é›¶å­¦ä¹ æˆæœ¬ï¼Œ3ç§’å†…å¼€å§‹å½•éŸ³

#### é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  é¤å…åç§°     [åº—é•¿å¤´åƒ]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚         â”‚                  â”‚         â”‚
â”‚         â”‚   [å£°æ³¢åŠ¨ç”»åŒº]    â”‚         â”‚
â”‚         â”‚   å½•éŸ³çŠ¶æ€æ˜¾ç¤º    â”‚         â”‚
â”‚         â”‚   00:32          â”‚         â”‚
â”‚         â”‚                  â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           é€‰æ‹©æ¡Œå·                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  A  B  C  D  E  F  G  H  ...   â”‚  â”‚  <- å­—æ¯è¡Œ (æ¨ªå‘æ»šåŠ¨)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1  2  3  4  5  6  7  8  ...   â”‚  â”‚  <- æ•°å­—è¡Œ (æ¨ªå‘æ»šåŠ¨)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚         å·²é€‰: [ B4 ]                 â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚        â”‚                    â”‚        â”‚
â”‚        â”‚   [å½•éŸ³æŒ‰é’®]       â”‚        â”‚  <- å¤§æŒ‰é’®ï¼Œé•¿æŒ‰å½•éŸ³
â”‚        â”‚   é•¿æŒ‰å¼€å§‹å½•éŸ³      â”‚        â”‚
â”‚        â”‚                    â”‚        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤äº’æµç¨‹

```
1. è¿›å…¥é¡µé¢ â†’ è‡ªåŠ¨è·å–éº¦å…‹é£æƒé™
2. é€‰æ‹©æ¡Œå· â†’ ç‚¹å‡»å­—æ¯ + ç‚¹å‡»æ•°å­— â†’ æ˜¾ç¤º "B4"
3. é•¿æŒ‰å½•éŸ³æŒ‰é’® â†’ å¼€å§‹å½•éŸ³ â†’ å£°æ³¢åŠ¨ç”»
4. æ¾å¼€æŒ‰é’® â†’ ç»“æŸå½•éŸ³ â†’ è‡ªåŠ¨ä¸Šä¼ 
5. ä¸Šä¼ æˆåŠŸ â†’ Toastæç¤º â†’ æ¸…ç©ºæ¡Œå· â†’ ç­‰å¾…ä¸‹ä¸€æ¬¡å½•éŸ³
```

#### ç»„ä»¶æ¸…å•

| ç»„ä»¶ | æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ |
|------|----------|------|
| RecorderPage | `app/(store-manager)/recorder/page.tsx` | ä¸»é¡µé¢ |
| WaveformVisualizer | `components/recorder/WaveformVisualizer.tsx` | å£°æ³¢åŠ¨ç”» |
| TableSelector | `components/recorder/TableSelector.tsx` | æ¡Œå·é€‰æ‹©å™¨ |
| RecordButton | `components/recorder/RecordButton.tsx` | å½•éŸ³æŒ‰é’® |
| useAudioRecorder | `hooks/useAudioRecorder.ts` | å½•éŸ³Hook |

---

### P2: æ•°æ®çœ‹æ¿ (/dashboard)

**è®¾è®¡ç›®æ ‡**: ä¸€çœ¼å®šç”Ÿæ­»ï¼Œå…³é”®æŒ‡æ ‡å³æ—¶å¯è§

#### é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  æ•°æ®çœ‹æ¿     [æ—¥æœŸé€‰æ‹©: ä»Šæ—¥ â–¼]    [é¤å…: XXåº— â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æ‰§è¡ŒåŒ¹é…æµ                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  æ—¶æ®µ   â”‚ å¼€å°æ•°  â”‚ æ¡Œè®¿æ•°  â”‚ è¦†ç›–ç‡  â”‚  çŠ¶æ€     â”‚  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚
â”‚  â”‚  â”‚  åˆå¸‚   â”‚   50    â”‚   42    â”‚  84%    â”‚  âš ï¸ -8æ¡Œ  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  æ™šå¸‚   â”‚   68    â”‚   65    â”‚  96%    â”‚  âœ… æ­£å¸¸  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  èœå“é›·è¾¾å›¾ TOP 5     â”‚  â”‚  æƒ…ç»ªè¶‹åŠ¿                    â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚    [é›·è¾¾å›¾]          â”‚  â”‚    [æŠ˜çº¿å›¾]                  â”‚ â”‚
â”‚  â”‚                      â”‚  â”‚    è¿‡å»7å¤©æƒ…ç»ªå¾—åˆ†å˜åŒ–        â”‚ â”‚
â”‚  â”‚  ğŸ¥‡ æ²¹ç„–å¤§è™¾ (18ğŸ‘2ğŸ‘) â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚  ğŸ¥ˆ æ‹›ç‰Œçº¢çƒ§è‚‰ (15ğŸ‘1ğŸ‘)â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚  ...                 â”‚  â”‚                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ä»Šæ—¥è¯æœ¯çº¢é»‘æ¦œ                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  âœ… æ­£å‘æ¡ˆä¾‹          â”‚  âš ï¸ å¾…æ”¹è¿›                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  "æ‚¨è§‰å¾—å’±å®¶æ‹›ç‰Œèœ    â”‚  "è¿˜è¡Œå§"                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   å‘³é“æ€ä¹ˆæ ·ï¼Ÿ"       â”‚  â†’ å»ºè®®å¼•å¯¼å…·ä½“èœå“        â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ•°æ®æŸ¥è¯¢é€»è¾‘

```sql
-- 1. æ‰§è¡ŒåŒ¹é…æµ
WITH sessions AS (
  SELECT period, COUNT(*) as open_count
  FROM lingtin_table_sessions
  WHERE session_date = CURRENT_DATE AND restaurant_id = $1
  GROUP BY period
),
visits AS (
  SELECT visit_period, COUNT(*) as visit_count
  FROM lingtin_visit_records
  WHERE visit_date = CURRENT_DATE AND restaurant_id = $1
  GROUP BY visit_period
)
SELECT
  s.period,
  s.open_count,
  COALESCE(v.visit_count, 0) as visit_count,
  ROUND(COALESCE(v.visit_count, 0)::numeric / s.open_count * 100, 1) as coverage
FROM sessions s
LEFT JOIN visits v ON s.period = v.visit_period;

-- 2. èœå“TOP5
SELECT
  dm.dish_name,
  COUNT(*) as mention_count,
  SUM(CASE WHEN dm.sentiment = 'positive' THEN 1 ELSE 0 END) as positive_count,
  SUM(CASE WHEN dm.sentiment = 'negative' THEN 1 ELSE 0 END) as negative_count
FROM lingtin_dish_mentions dm
JOIN lingtin_visit_records vr ON dm.visit_id = vr.id
WHERE vr.visit_date = CURRENT_DATE AND vr.restaurant_id = $1
GROUP BY dm.dish_name
ORDER BY mention_count DESC
LIMIT 5;
```

#### ç»„ä»¶æ¸…å•

| ç»„ä»¶ | æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ |
|------|----------|------|
| DashboardPage | `app/(dashboard)/overview/page.tsx` | ä¸»é¡µé¢ |
| CoverageTable | `components/dashboard/CoverageTable.tsx` | æ‰§è¡ŒåŒ¹é…è¡¨ |
| DishRadarChart | `components/dashboard/DishRadarChart.tsx` | èœå“é›·è¾¾å›¾ |
| SentimentTrend | `components/dashboard/SentimentTrend.tsx` | æƒ…ç»ªè¶‹åŠ¿å›¾ |
| SpeechHighlights | `components/dashboard/SpeechHighlights.tsx` | è¯æœ¯çº¢é»‘æ¦œ |

---

### P3: AIæ™ºåº“å¯¹è¯ (/chat)

**è®¾è®¡ç›®æ ‡**: è‡ªç”±é—®ç­”ï¼Œæ•°æ®é©±åŠ¨æ´å¯Ÿ

#### é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  AIæ™ºåº“     [é¤å…: XXåº— â–¼]    [æ¸…ç©ºå¯¹è¯]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  [ç”¨æˆ·] ä¸Šå‘¨BåŒºçš„å®¢äººå¯¹æ–°ä¸Šçš„é²ˆé±¼æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  [AI] æ ¹æ®ä¸Šå‘¨BåŒºçš„12æ¡æ¡Œè®¿è®°å½•ï¼Œæ¸…è’¸é²ˆé±¼è¢«æåŠ8æ¬¡ï¼š     â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  **æ­£é¢è¯„ä»· (6æ¬¡)**                                      â”‚ â”‚
â”‚  â”‚  - "é±¼å¾ˆæ–°é²œï¼Œè’¸å¾—åˆšåˆšå¥½" - B3æ¡Œ, å‘¨äºŒåˆå¸‚               â”‚ â”‚
â”‚  â”‚  - "è‚‰è´¨ç»†å«©" - B7æ¡Œ, å‘¨ä¸‰æ™šå¸‚                           â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  **è´Ÿé¢è¯„ä»· (2æ¬¡)**                                      â”‚ â”‚
â”‚  â”‚  - "ç¨å¾®æœ‰ç‚¹è…¥" - B4æ¡Œ, å‘¨å››åˆå¸‚                         â”‚ â”‚
â”‚  â”‚  - "åˆ†é‡å¯ä»¥å†å¤§ä¸€ç‚¹" - B9æ¡Œ, å‘¨äº”æ™šå¸‚                   â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  **å»ºè®®**: å¯ä»¥åœ¨ä¸Šèœæ—¶æé†’å®¢äººé…åˆå§œä¸å»è…¥ã€‚            â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å¿«æ·é—®é¢˜:                                               â”‚ â”‚
â”‚  â”‚  [ä»Šå¤©æŠ•è¯‰æœ€å¤šçš„èœ] [æœ¬å‘¨æƒ…ç»ªæœ€ä½çš„æ¡Œ] [é€€èœåŸå› åˆ†æ]   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [è¾“å…¥æ¡†: é—®æˆ‘ä»»ä½•å…³äºæ¡Œè®¿çš„é—®é¢˜...]        [å‘é€]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Claude SDK é›†æˆè®¾è®¡

```typescript
// Text-to-SQL Prompt è®¾è®¡
const SYSTEM_PROMPT = `
ä½ æ˜¯ä¸€ä¸ªé¤é¥®æ•°æ®åˆ†æåŠ©æ‰‹ã€‚ä½ å¯ä»¥æŸ¥è¯¢ä»¥ä¸‹æ•°æ®è¡¨ï¼š

## å¯ç”¨è¡¨
1. lingtin_visit_records - æ¡Œè®¿å½•éŸ³è®°å½•
   - table_id: æ¡Œå· (å¦‚ B4)
   - corrected_transcript: çº ååçš„å¯¹è¯æ–‡æœ¬
   - visit_type: routine/complaint/promotion
   - sentiment_score: -1åˆ°1çš„æƒ…ç»ªå¾—åˆ†
   - visit_date, visit_period: æ—¥æœŸå’Œæ—¶æ®µ

2. lingtin_dish_mentions - èœå“æåŠ
   - dish_name: èœå“åç§°
   - sentiment: positive/negative/neutral
   - feedback_text: å…·ä½“åé¦ˆ

3. lingtin_table_sessions - å¼€å°æ•°æ®
   - session_date, period: æ—¥æœŸå’Œæ—¶æ®µ
   - table_id, guest_count: æ¡Œå·å’Œäººæ•°

## å½“å‰ä¸Šä¸‹æ–‡
- é¤å…ID: {{restaurant_id}}
- å½“å‰æ—¥æœŸ: {{current_date}}

## å›ç­”è§„èŒƒ
1. å…ˆç”ŸæˆSQLæŸ¥è¯¢æ•°æ®
2. ç”¨è‡ªç„¶è¯­è¨€æ€»ç»“å‘ç°
3. å¦‚æœ‰è´Ÿé¢åé¦ˆï¼Œç»™å‡ºæ”¹è¿›å»ºè®®
4. å¼•ç”¨å…·ä½“çš„æ¡Œå·å’Œæ—¥æœŸä½œä¸ºè¯æ®
`;
```

#### ç»„ä»¶æ¸…å•

| ç»„ä»¶ | æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ |
|------|----------|------|
| ChatPage | `app/(chat)/assistant/page.tsx` | ä¸»é¡µé¢ |
| ChatMessage | `components/chat/ChatMessage.tsx` | æ¶ˆæ¯æ°”æ³¡ |
| QuickQuestions | `components/chat/QuickQuestions.tsx` | å¿«æ·é—®é¢˜ |
| ChatInput | `components/chat/ChatInput.tsx` | è¾“å…¥æ¡† |
| useChatSession | `hooks/useChatSession.ts` | å¯¹è¯Hook |

---

## ä¸‰ã€API è®¾è®¡

### AudioModule (/api/audio)

```typescript
// POST /api/audio/upload
// ä¸Šä¼ å½•éŸ³æ–‡ä»¶
Request:
  - file: audio/webm (FormData)
  - table_id: string (B4)
  - restaurant_id: uuid
  - employee_id: uuid

Response:
  - visit_id: uuid
  - status: "pending"

// GET /api/audio/status/:visit_id
// æŸ¥è¯¢å¤„ç†çŠ¶æ€
Response:
  - status: "pending" | "processing" | "completed" | "failed"
  - processed_at?: timestamp
  - error_message?: string
```

### DashboardModule (/api/dashboard)

```typescript
// GET /api/dashboard/coverage
// è·å–è¦†ç›–ç‡æ•°æ®
Query:
  - restaurant_id: uuid
  - date: string (YYYY-MM-DD)

Response:
  - periods: [{ period, open_count, visit_count, coverage }]

// GET /api/dashboard/dish-ranking
// è·å–èœå“æ’è¡Œ
Query:
  - restaurant_id: uuid
  - date: string
  - limit: number (default 5)

Response:
  - dishes: [{ dish_name, mention_count, positive, negative }]

// GET /api/dashboard/sentiment-trend
// è·å–æƒ…ç»ªè¶‹åŠ¿
Query:
  - restaurant_id: uuid
  - days: number (default 7)

Response:
  - trend: [{ date, avg_sentiment }]
```

### ChatModule (/api/chat)

```typescript
// POST /api/chat/message
// å‘é€å¯¹è¯æ¶ˆæ¯
Request:
  - session_id: uuid
  - restaurant_id: uuid
  - message: string

Response (Stream):
  - type: "text" | "sql" | "result"
  - content: string

// GET /api/chat/sessions
// è·å–å†å²ä¼šè¯
Query:
  - restaurant_id: uuid

Response:
  - sessions: [{ id, title, created_at }]
```

---

## å››ã€AI Pipeline è®¾è®¡

### å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. éŸ³é¢‘ä¸Šä¼ è§¦å‘                                             â”‚
â”‚     lingtin_visit_records.status = 'pending'                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. è®¯é£STTè½¬å†™                                              â”‚
â”‚     - è°ƒç”¨è®¯é£å®æ—¶è¯­éŸ³è½¬å†™API                                â”‚
â”‚     - è¾“å‡º: raw_transcript                                   â”‚
â”‚     - status = 'processing'                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. èœåçº å (Correction)                                    â”‚
â”‚     - åŠ è½½ lingtin_dishname_view èœå“å­—å…¸                    â”‚
â”‚     - æ¨¡ç³ŠåŒ¹é…: "çº¢çƒ§åˆ" â†’ "çº¢çƒ§è‚‰"                          â”‚
â”‚     - ç®—æ³•: ç¼–è¾‘è·ç¦» + æ‹¼éŸ³ç›¸ä¼¼åº¦                            â”‚
â”‚     - è¾“å‡º: corrected_transcript                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. å®ä½“è¯†åˆ« + æƒ…æ„Ÿåˆ†æ (Claude)                             â”‚
â”‚     Prompt:                                                 â”‚
â”‚     "åˆ†æä»¥ä¸‹æ¡Œè®¿å¯¹è¯ï¼Œæå–:                                  â”‚
â”‚      1. æåŠçš„èœå“åŠè¯„ä»·(æ­£é¢/è´Ÿé¢/ä¸­æ€§)                      â”‚
â”‚      2. æ•´ä½“æƒ…ç»ªå¾—åˆ†(-1åˆ°1)                                  â”‚
â”‚      3. è®¿é—®ç±»å‹(å¸¸è§„/æŠ•è¯‰/æ¨ä»‹)                             â”‚
â”‚      4. æœåŠ¡ç¯èŠ‚(ç‚¹èœ/ä¸Šèœ/ç»“è´¦)                             â”‚
â”‚      5. ä¸€å¥è¯æ€»ç»“"                                         â”‚
â”‚                                                             â”‚
â”‚     è¾“å‡º: JSONç»“æ„åŒ–æ•°æ®                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. å†™å…¥æ•°æ®åº“                                               â”‚
â”‚     - æ›´æ–° lingtin_visit_records (æ‰“æ ‡å­—æ®µ)                  â”‚
â”‚     - æ’å…¥ lingtin_dish_mentions (èœå“æåŠ)                  â”‚
â”‚     - status = 'completed'                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çº åç®—æ³•ä¼ªä»£ç 

```typescript
function correctDishName(rawText: string, dishDict: string[]): string {
  // 1. åˆ†è¯
  const words = segment(rawText);

  // 2. å¯¹æ¯ä¸ªå¯èƒ½æ˜¯èœåçš„è¯è¿›è¡ŒåŒ¹é…
  for (const word of words) {
    // ç²¾ç¡®åŒ¹é…
    if (dishDict.includes(word)) continue;

    // æ¨¡ç³ŠåŒ¹é…
    const candidates = dishDict.filter(dish => {
      const editDist = levenshtein(word, dish);
      const pinyinSim = pinyinSimilarity(word, dish);
      return editDist <= 2 || pinyinSim > 0.8;
    });

    if (candidates.length > 0) {
      // é€‰æ‹©æœ€ç›¸ä¼¼çš„
      const best = candidates.sort((a, b) =>
        similarity(word, b) - similarity(word, a)
      )[0];
      rawText = rawText.replace(word, best);
    }
  }

  return rawText;
}
```

---

## äº”ã€ç›®å½•ç»“æ„

```
lingtinofsmartice/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                              # Next.js å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ (store-manager)/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ recorder/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx          # P1: å½•éŸ³é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ overview/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx          # P2: çœ‹æ¿é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ (chat)/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ assistant/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx          # P3: å¯¹è¯é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                  # é¦–é¡µ/ç™»å½•
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ recorder/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WaveformVisualizer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TableSelector.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RecordButton.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CoverageTable.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DishRadarChart.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SentimentTrend.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SpeechHighlights.tsx
â”‚   â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚   â”‚       â”œâ”€â”€ ChatMessage.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ QuickQuestions.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ChatInput.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useAudioRecorder.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useChatSession.ts
â”‚   â”‚   â”‚   â””â”€â”€ useSupabase.ts
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â””â”€â”€ supabase/
â”‚   â”‚   â”‚       â”œâ”€â”€ client.ts
â”‚   â”‚   â”‚       â””â”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”‚   â””â”€â”€ manifest.json             # PWAé…ç½®
â”‚   â”‚   â”œâ”€â”€ next.config.js
â”‚   â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ api/                              # NestJS åç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ modules/
â”‚       â”‚   â”‚   â”œâ”€â”€ audio/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ audio.controller.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ audio.service.ts
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ audio.module.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ pipeline/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ stt/
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ iflytek.service.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ correction/
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dish-correction.service.ts
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ tagging/
â”‚       â”‚   â”‚   â”‚       â””â”€â”€ claude-tagging.service.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.controller.ts
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ dashboard.service.ts
â”‚       â”‚   â”‚   â””â”€â”€ chat/
â”‚       â”‚   â”‚       â”œâ”€â”€ chat.controller.ts
â”‚       â”‚   â”‚       â””â”€â”€ chat.service.ts
â”‚       â”‚   â”œâ”€â”€ common/
â”‚       â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ supabase.service.ts
â”‚       â”‚   â”‚   â””â”€â”€ config/
â”‚       â”‚   â”‚       â””â”€â”€ env.config.ts
â”‚       â”‚   â”œâ”€â”€ app.module.ts
â”‚       â”‚   â””â”€â”€ main.ts
â”‚       â”œâ”€â”€ test/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ types/                            # å…±äº«ç±»å‹
â”‚       â”œâ”€â”€ database.ts                   # Supabaseç”Ÿæˆçš„ç±»å‹
â”‚       â””â”€â”€ api.ts                        # APIè¯·æ±‚/å“åº”ç±»å‹
â”‚
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ migrations/                       # å·²æœ‰çš„migrationæ–‡ä»¶
â”‚
â”œâ”€â”€ CLAUDE.md                             # é¡¹ç›®è¯´æ˜ (å·²åˆ›å»º)
â”œâ”€â”€ plan.md                               # æœ¬è®¾è®¡æ–‡æ¡£
â””â”€â”€ package.json                          # Monorepoé…ç½®
```

---

## å…­ã€å¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½ (Foundation)

- [ ] åˆå§‹åŒ– Monorepo (pnpm workspace)
- [ ] åˆå§‹åŒ– Next.js é¡¹ç›® + PWAé…ç½®
- [ ] åˆå§‹åŒ– NestJS é¡¹ç›®
- [ ] é…ç½® Supabase å®¢æˆ·ç«¯
- [ ] ç”Ÿæˆ TypeScript ç±»å‹

### Phase 2: P1 åº—é•¿å½•éŸ³ç«¯

- [ ] å®ç° useAudioRecorder Hook
- [ ] å®ç° TableSelector ç»„ä»¶
- [ ] å®ç° WaveformVisualizer ç»„ä»¶
- [ ] å®ç° RecordButton ç»„ä»¶
- [ ] å®ç° /api/audio/upload æ¥å£
- [ ] é›†æˆ Supabase Storage ä¸Šä¼ 

### Phase 3: AI Pipeline

- [ ] é›†æˆè®¯é£STT API
- [ ] å®ç°èœåçº åç®—æ³•
- [ ] é›†æˆ Claude SDK æ‰“æ ‡
- [ ] å®ç°å¼‚æ­¥å¤„ç†é˜Ÿåˆ—

### Phase 4: P2 æ•°æ®çœ‹æ¿

- [ ] å®ç° /api/dashboard/* æ¥å£
- [ ] å®ç° CoverageTable ç»„ä»¶
- [ ] å®ç° DishRadarChart ç»„ä»¶
- [ ] å®ç° SentimentTrend ç»„ä»¶
- [ ] å®ç° SpeechHighlights ç»„ä»¶

### Phase 5: P3 AIæ™ºåº“

- [ ] å®ç° /api/chat/message æ¥å£ (æµå¼)
- [ ] å®ç° Text-to-SQL Prompt
- [ ] å®ç° ChatMessage ç»„ä»¶
- [ ] å®ç° QuickQuestions ç»„ä»¶
- [ ] å®ç°å†å²ä¼šè¯ç®¡ç†

### Phase 6: æ”¶å°¾

- [ ] PWAç¦»çº¿æ”¯æŒ
- [ ] é”™è¯¯å¤„ç†å’ŒLoadingçŠ¶æ€
- [ ] å“åº”å¼é€‚é…
- [ ] éƒ¨ç½²é…ç½®

---

## ä¸ƒã€ç¯å¢ƒå˜é‡

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# è®¯é£
IFLYTEK_APP_ID=
IFLYTEK_API_KEY=
IFLYTEK_API_SECRET=

# Claude (é€šè¿‡ packyapi)
ANTHROPIC_API_KEY=

# å…¶ä»–
NODE_ENV=development
```
